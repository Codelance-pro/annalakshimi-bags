import{c as q,u as R,r as a,a as D,b as m,j as e,m as l,X as O,d as Q,S as T}from"./index-C7IkZUaa.js";import{P as V,B as S}from"./Button-mHSfFnPb.js";import{H as W}from"./heart-rn8QEHEY.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=q("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),Y=()=>{const[p,y]=R(),[b,P]=a.useState([]),[C,c]=a.useState("All"),[G,$]=a.useState("All"),[h,A]=a.useState(!1),[j,f]=a.useState(null),[r,d]=a.useState([]),N="https://jute-be-production.up.railway.app",[o,k]=a.useState([]),[v,F]=a.useState(""),[x,z]=a.useState(""),{categorySlug:u}=D(),E=s=>s.toLowerCase().replace(/\s+/g,"-");a.useEffect(()=>{L()},[]),a.useEffect(()=>{if(u){const s=o.find(t=>E(t.name)===u);console.log("category",s),s?(c(s.id),w(s.id)):(c("All"),g())}else g()},[u,o]);const g=async()=>{try{const t=(await m.get("https://jute-be-production.up.railway.app/api/products?populate=image")).data.data;console.log("data",t),d(t)}catch(s){console.error("Error fetching data:",s)}},L=async()=>{try{const t=(await m.get("https://jute-be-production.up.railway.app/api/categories")).data.data;console.log("Fetched cat:",t);const i=[{id:"All",name:"All"},...t.map(n=>({id:n.id,name:n.name}))];k(i),console.log("Fetched categories:",i)}catch(s){return console.error("Error fetching categories:",s),[]}},w=async(s,t)=>{try{const i=await m.get(`https://jute-be-production.up.railway.app/api/products?filters[category][id][$eq]=${s}&populate=*`);d(i.data.data)}catch(i){console.error("Error filtering products:",i)}},M=s=>{c(s),d([]),console.log("Selected category:",s),s=="All"?g():w(s),s==="All"?p.delete("category"):p.set("category",s),y(p)},H=()=>{A(!h)},B=async()=>{let s=`http://localhost:1337/api/products?populate=*&filters[price][$gte]=${v||0}`;x&&(s+=`&filters[price][$lte]=${x}`);try{const t=await m.get(s);d(t.data.data)}catch(t){console.error("Failed to fetch filtered products",t)}};return e.jsxs(V,{children:[e.jsxs("section",{className:"relative h-80 md:h-96 flex items-center",children:[e.jsxs("div",{className:"absolute inset-0 z-0",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-primary-950/70 to-primary-950/40 z-10"}),e.jsx("img",{src:"https://images.pexels.com/photos/1038000/pexels-photo-1038000.jpeg?auto=compress&cs=tinysrgb&w=1920",alt:"Shop banner",className:"w-full h-full object-cover"})]}),e.jsx("div",{className:"container-custom relative z-20",children:e.jsxs(l.div,{className:"max-w-xl",initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8,delay:.2},children:[e.jsx(l.h1,{className:"text-white mb-4",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.3},children:"Shop Collection"}),e.jsx(l.p,{className:"text-white/90 text-lg",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.4},children:"Discover our handcrafted leather bags designed for modern life."})]})})]}),e.jsx("section",{className:"py-12 bg-primary-50",children:e.jsx("div",{className:"container-custom",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[e.jsx("div",{className:"lg:hidden mb-4",children:e.jsxs("button",{onClick:H,className:"w-full flex items-center justify-between px-4 py-2 bg-white rounded-md shadow-sm border border-primary-100",children:[e.jsxs("span",{className:"flex items-center",children:[e.jsx(X,{size:20,className:"mr-2"}),"Filter Products"]}),h?e.jsx(O,{size:20}):e.jsx("span",{className:"text-xs bg-primary-100 px-2 py-1 rounded-full",children:b.length})]})}),e.jsxs(l.aside,{className:`lg:w-1/4 xl:w-1/5 ${h?"block":"hidden"} lg:block bg-white p-6 rounded-lg shadow-sm h-fit`,initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5},children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Categories"}),e.jsx("ul",{className:"space-y-2",children:o==null?void 0:o.map(s=>e.jsx("li",{children:e.jsxs("button",{onClick:()=>M(s.id),className:`w-full text-left py-1 px-2 rounded-md transition-colors ${C===s.id?"bg-primary-100 text-primary-900 font-medium":"text-primary-600 hover:bg-primary-50"}`,children:[" ",s.name]})},s.id))})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Price Range"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-primary-500 mb-1 block",children:"Min"}),e.jsx("input",{type:"number",placeholder:"$0",className:"w-full p-2 border border-primary-200 rounded-md",value:v,onChange:s=>F(s.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-primary-500 mb-1 block",children:"Max"}),e.jsx("input",{type:"number",placeholder:"$500",className:"w-full p-2 border border-primary-200 rounded-md",value:x,onChange:s=>z(s.target.value)})]})]}),e.jsx("button",{className:"w-full mt-2 py-2 bg-primary-100 text-primary-800 rounded-md hover:bg-primary-200 transition-colors",onClick:B,children:"Apply"})]})]})]}),e.jsxs(l.div,{className:"lg:w-3/4 xl:w-4/5",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.2},children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("p",{className:"text-primary-600",children:["Showing ",e.jsx("span",{className:"font-medium text-primary-900",children:r.length})," products"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"text-primary-600 hidden sm:inline",children:"Sort by:"}),e.jsxs("select",{className:"border border-primary-200 rounded-md p-2 bg-white",children:[e.jsx("option",{children:"Newest"}),e.jsx("option",{children:"Price: Low to High"}),e.jsx("option",{children:"Price: High to Low"}),e.jsx("option",{children:"Best Selling"})]})]})]}),(r==null?void 0:r.length)>0?e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:r==null?void 0:r.map((s,t)=>{var i,n;return e.jsxs(l.div,{className:"group",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:t*.1},onMouseEnter:()=>f(s.id),onMouseLeave:()=>f(null),children:[e.jsxs("div",{className:"bg-white rounded-lg overflow-hidden relative mb-4",children:[s.negotiable=="yes"&&e.jsx("div",{className:"absolute top-3 left-3 z-10 bg-accent-600 text-white text-xs font-medium px-2 py-1 rounded",children:"Negotiable"}),e.jsx("div",{className:"aspect-square overflow-hidden",children:e.jsx("img",{src:`${N}${(i=s==null?void 0:s.image)==null?void 0:i.url}`,alt:"jute bag",className:"w-full h-full object-cover  transition-transform duration-700 group-hover:scale-105"})}),e.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/10 transition-all duration-300"}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-4 flex justify-between items-center",children:e.jsx(l.div,{initial:{opacity:0,y:20},animate:j===s.id?{opacity:1,y:0}:{opacity:0,y:20},transition:{duration:.3},className:"w-full",children:e.jsx(Q,{to:`/product/${s.id}`,state:{image:`${N}${(n=s==null?void 0:s.image)==null?void 0:n.url}`,name:s.name,price:s.price,description:s.description,negotiable:s.negotiable},className:"w-full",children:e.jsxs(S,{variant:"primary",className:"w-full flex items-center justify-center gap-2",children:[e.jsx(T,{size:16}),e.jsx("span",{children:"Quick View"})]})})})}),e.jsx(l.button,{className:"absolute top-3 right-3 bg-white/80 hover:bg-white text-primary-900 p-2 rounded-full",initial:{opacity:0,scale:.8},animate:j===s.id?{opacity:1,scale:1}:{opacity:0,scale:.8},transition:{duration:.2},"aria-label":"Add to wishlist",children:e.jsx(W,{size:16})})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"font-medium text-lg mb-1",children:e.jsx("a",{href:`/product/${s.id}`,className:"hover:text-accent-600 transition-colors",children:s.name})}),e.jsxs("p",{className:"text-primary-900 font-semibold",children:[" One Piece - â‚¹ ",s.price]})]})]},s.id)})}):e.jsxs("div",{className:"bg-white rounded-lg p-8 text-center",children:[e.jsx("p",{className:"text-lg mb-4",children:"No products found matching your criteria."}),e.jsx(S,{onClick:()=>{c("All"),$("All"),y({}),P(r)},children:"Reset Filters"})]}),b.length>0&&e.jsx("div",{className:"flex justify-center mt-12",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{className:"px-4 py-2 border border-primary-200 rounded-md hover:bg-primary-50 transition-colors",children:"Previous"}),e.jsx("button",{className:"px-4 py-2 bg-primary-900 text-white rounded-md",children:"1"}),e.jsx("button",{className:"px-4 py-2 border border-primary-200 rounded-md hover:bg-primary-50 transition-colors",children:"2"}),e.jsx("button",{className:"px-4 py-2 border border-primary-200 rounded-md hover:bg-primary-50 transition-colors",children:"3"}),e.jsx("button",{className:"px-4 py-2 border border-primary-200 rounded-md hover:bg-primary-50 transition-colors",children:"Next"})]})})]})]})})})]})};export{Y as default};
